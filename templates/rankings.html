{% extends 'base.html' %}

{% block content %}
    <h1>Bourbon Rankings</h1>

    <table class="table table-bordered">
        <thead>
            <tr>
                <th>
                    <a href="{{ url_for('rankings', sort_by='bourbon_name', sort_order='asc' if sort_by != 'bourbon_name' or sort_order == 'desc' else 'desc') }}">
                        Bourbon Name
                        {% if sort_by == 'bourbon_name' %}
                            {% if sort_order == 'asc' %}
                                <span>&#8593;</span>  <!-- Up arrow for ascending -->
                            {% else %}
                                <span>&#8595;</span>  <!-- Down arrow for descending -->
                            {% endif %}
                        {% endif %}
                    </a>
                </th>

                <!-- Dynamically generate the drink type columns -->
                {% for drink_type in drink_types %}
                    <th>
                        <a href="{{ url_for('rankings', sort_by=drink_type, sort_order='asc' if sort_by != drink_type or sort_order == 'desc' else 'desc') }}">
                            {{ drink_type }}
                            {% if sort_by == drink_type %}
                                {% if sort_order == 'asc' %}
                                    <span>&#8593;</span>  <!-- Up arrow for ascending -->
                                {% else %}
                                    <span>&#8595;</span>  <!-- Down arrow for descending -->
                                {% endif %}
                            {% endif %}
                        </a>
                    </th>
                {% endfor %}
            </tr>
        </thead>
        <tbody>
            {% for bourbon_name, bourbon_data in rankings.items() %}
            <tr>
                <td>{{ bourbon_name }}</td>

                <!-- Display ratings for each drink type -->
                {% for drink_type in drink_types %}
                    <td>{{ bourbon_data["ratings"].get(drink_type, "N/A") }}</td>
                {% endfor %}
            </tr>
            {% endfor %}
        </tbody>
    </table>
{% endblock %}
